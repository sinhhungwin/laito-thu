<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω doanh thu</title>
    <!-- Link t·ªõi file CSS b√™n ngo√†i -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h2>Nh·∫≠p th√¥ng tin h√≥a ƒë∆°n</h2>

        <!-- Lo·∫°i giao d·ªãch: Thu / Chi -->
        <label>Lo·∫°i giao d·ªãch:</label>
        <div class="toggle-row">
            <div>
                <input type="radio" id="thu" name="transactionType" value="THU" checked>
                <label class="toggle-option thu" for="thu">THU</label>
            </div>
            <div>
                <input type="radio" id="chi" name="transactionType" value="CHI">
                <label class="toggle-option chi" for="chi">CHI</label>
            </div>
        </div>

        <!-- Ph∆∞∆°ng th·ª©c thanh to√°n -->
        <label for="paymentMethod">Ph∆∞∆°ng th·ª©c thanh to√°n:</label>
        <select id="paymentMethod">
            <option value="Ti·ªÅn m·∫∑t">Ti·ªÅn m·∫∑t</option>
            <option value="Chuy·ªÉn kho·∫£n">Chuy·ªÉn kho·∫£n</option>
            <option value="Th·∫ª">Th·∫ª</option>
            <option value="Paypal">PayPal</option>
        </select>

        <!-- Lo·∫°i ti·ªÅn -->
        <label>Lo·∫°i ti·ªÅn:</label>
        <div class="radio-row">
            <label><input type="radio" name="currency" value="VND" checked> VND</label>
            <label><input type="radio" name="currency" value="USD"> USD</label>
            <label><input type="radio" name="currency" value="EUR"> EUR</label>
            <label><input type="radio" name="currency" value="AUD"> AUD</label>
        </div>

        <!-- S·ªë ti·ªÅn -->
        <label for="amount">S·ªë ti·ªÅn:</label>
        <input type="number" id="amount" placeholder="Nh·∫≠p s·ªë ti·ªÅn">

        <!-- Ghi ch√∫ -->
        <label for="note">Ghi ch√∫:</label>
        <input type="text" id="note" placeholder="Ghi ch√∫ (t√πy ch·ªçn)">

        <!-- Ng∆∞·ªùi b√°n -->
        <label>Ng∆∞·ªùi b√°n:</label>
        <div class="radio-row">
            <label><input type="radio" name="seller" value="E H√ôNG" checked> E H√ôNG</label>
            <label><input type="radio" name="seller" value="A T√ö"> A T√ö</label>
            <label><input type="radio" name="seller" value="A NAM"> A NAM</label>
        </div>

        <button onclick="sendData()">G·ª≠i</button>

        <p id="status"></p>
    </div>

    <script>
        function resetForm() {
            document.querySelector('input[name="transactionType"][value="THU"]').checked = true;
            document.getElementById("paymentMethod").selectedIndex = 0;
            document.querySelector('input[name="currency"][value="VND"]').checked = true;
            document.getElementById("amount").value = "";
            document.getElementById("note").value = "";
            document.querySelector('input[name="seller"][value="E H√ôNG"]').checked = true;
        }

        function sendData() {
            const transactionType = document.querySelector('input[name="transactionType"]:checked').value;
            const paymentMethod = document.getElementById("paymentMethod").value;
            const amount = document.getElementById("amount").value;
            const note = document.getElementById("note").value;
            const currency = document.querySelector('input[name="currency"]:checked').value;
            const seller = document.querySelector('input[name="seller"]:checked').value;
            const statusEl = document.getElementById("status");

            if (!amount) {
                statusEl.innerText = "‚ùå Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn!";
                statusEl.style.color = "#ff8a65";
                return;
            }

            const formattedAmount =
                currency === "VND" ? amount : `${amount} ${currency}`;

            let header, clipboardText, statusText;

            if (transactionType === "THU") {
                // Format THU:
                // üí∞ THU üí∞
                // E H√ôNG b√°n
                // Ph∆∞∆°ng th·ª©c: Ti·ªÅn m·∫∑t
                // S·ªë ti·ªÅn: 1000
                // Ghi ch√∫: g√¨ ƒë√≥
                header = "üí∞ THU üí∞";
                clipboardText =
                    `${header}\n` +
                    `${seller} b√°n\n` +
                    `Ph∆∞∆°ng th·ª©c: ${paymentMethod}\n` +
                    `S·ªë ti·ªÅn: ${formattedAmount}\n` +
                    `Ghi ch√∫: ${note || "(kh√¥ng)"}`;

                statusText = clipboardText; // hi·ªÉn th·ªã gi·ªëng n·ªôi dung copy
            } else {
                // Format CHI:
                // üí∏ CHI üí∏
                // S·ªë ti·ªÅn: 10
                // Ghi ch√∫: ship
                header = "üí∏ CHI üí∏";
                clipboardText =
                    `${header}\n` +
                    `S·ªë ti·ªÅn: ${formattedAmount}\n` +
                    `Ghi ch√∫: ${note || "(kh√¥ng)"}`;

                statusText = clipboardText;
            }

            statusEl.innerText = statusText;
            statusEl.style.color = "#aed581";

            try {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(clipboardText)
                        .then(() => {
                            resetForm();
                        })
                        .catch(err => {
                            console.error("Clipboard error:", err);
                            statusEl.innerText +=
                                `\n‚ö†Ô∏è Kh√¥ng copy ƒë∆∞·ª£c, h√£y t·ª± copy:\n\n${clipboardText}`;
                            statusEl.style.color = "#ffb74d";
                            resetForm();
                        });

                } else {
                    statusEl.innerText +=
                        `\n‚ö†Ô∏è Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ copy,\nH√£y t·ª± copy ƒëo·∫°n sau:\n\n${clipboardText}`;
                    statusEl.style.color = "#ffb74d";
                    resetForm();
                }
            } catch (err) {
                console.error("Clipboard exception:", err);
                statusEl.innerText +=
                    `\n‚ö†Ô∏è L·ªói clipboard.\nT·ª± copy ƒëo·∫°n sau:\n\n${clipboardText}`;
                statusEl.style.color = "#ffb74d";
                resetForm();
            }
        }
    </script>
</body>
</html>
